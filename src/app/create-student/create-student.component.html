<h1>Create Student</h1>

<form [formGroup]="studentForm">
    <label>Enter Name:</label>
    <input type="text" formControlName="name" appCapital><br>

    <div *ngIf="studentForm.get('name')?.touched && studentForm.get('name')?.invalid">
        <p *ngIf="studentForm.get('name')?.errors?.['required']">Name should be enter</p>
        <p *ngIf="studentForm.get('name')?.errors?.['minlength']">Name should be minimum 6 characters</p>
        <p *ngIf="studentForm.get('name')?.errors?.['maxlength']">Name should be maximum 12 characters</p>
    </div>

    <label>Enter Email:</label> 
    <input type="email" formControlName="email"><br>

    <label>Enter Mobile:</label>
    <input type="number" formControlName="mobile"><br>

    <label>Enter age:</label> 
    <input type="number" formControlName="age"><br>

    <div formGroupName="address">
    <label>Enter City:</label>
    <input type="text" formControlName="city"><br>

    <label>Enter State:</label>
    <input type="text" formControlName="state"><br>

    <label>Enter Pincode:</label>
    <input type="number" formControlName="pin"><br>
    </div>

    <label>Are you?:</label>
    <input type="radio"  formControlName="type" [value]="true" name="type">
    <label>DayScholar</label>
    <input type="radio" formControlName="type" [value]="false" name="type">
    <label>Residential</label><br>
    
    <div *ngIf="studentForm.get('type')?.value==false">
    <label>Hostel Fee:</label>
    <input type="number" formControlName="hostelFee"><br>
    </div>

    <div *ngIf="studentForm.get('type')?.value==true">
    <label>Bus Fee:</label>
    <input type="number" formControlName="busFee"><br>
    </div>

    <button class="btn btn-primary" (click)="add()">Add Card</button>

    <div formArrayName="cards">
        <div *ngFor="let card of cardsFormArray.controls;let i=index">
            <div formGroupName="{{i}}">
                <h3>Card{{i+1}}</h3>
            <label>Card Number:</label>
            <input type="number" formControlName="number"><br>

            <label>Expiry month:</label>
            <input type="month" formControlName="expiry"><br>

            <label>CVV:</label>
            <input type="number" formControlName="cvv"><br>
            <button (click)="delete(i)" class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>



    <button (click)="submit()" class="btn btn-warning">Submit</button>
</form>